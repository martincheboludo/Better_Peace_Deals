BPD_Peace_Deal_Manager = {

	show_hide_peace_decisions = {
        priority = 100
        visible = { always = yes }
		
		ai_will_do = {
			factor = 0
		}

        complete_effect = { 
            if = {
                limit = { has_country_flag = show_peace_decisions }
                clr_country_flag = show_peace_decisions
            }
            else = {
                set_country_flag = show_peace_decisions
            }
        }
    }
	
	BPD_demand_surrender_td_attacker = {
	
		icon = eng_trade_unions_support
		
		allowed = {
		}
	
        visible = {
			NOT = { has_country_flag = show_peace_decisions }
        }
        target_trigger = {
            FROM = {
                has_war_with = ROOT
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
            }
        }
        cost = 25
		modifier = { }
		days_re_enable = 180
		
		ai_will_do = {
			factor = 0
		}

        available = {
		
			surrender_progress < 0.1
		
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		
			war_length_with = {
				tag = FROM
				months > 5
			}

        }
		complete_effect = {
			FROM = { country_event = { id = BPD_Better_Peace_Deals_Country.4 hours = 6 } }
		}
    }
	
	BPD_secure_our_claims_td_attacker = {
	
		icon = eng_trade_unions_support
		
		allowed = {
		}
	
        visible = {
			NOT = { has_country_flag = show_peace_decisions }
        }
        target_trigger = {
            FROM = {
                has_war_with = ROOT
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
            }
        }
        cost = 25
		modifier = { }
		days_re_enable = 180
		
		ai_will_do = {
			factor = 0
		}

        available = {
		
			surrender_progress < 0.1
		
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		
			war_length_with = {
				tag = FROM
				months > 5
			}

        }
		complete_effect = {
			FROM = { country_event = { id = BPD_Better_Peace_Deals_Country.2 hours = 6 } }
		}
    }
	
	BPD_peace_current_borders_td_attacker = {
	
		icon = eng_trade_unions_support
		
		allowed = {
		}
	
        visible = {
			NOT = { has_country_flag = show_peace_decisions }
        }
        target_trigger = {
            FROM = {
                has_war_with = ROOT
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
            }
        }
        cost = 25
		modifier = { }
		days_re_enable = 180
		
		ai_will_do = {
			factor = 0
		}

        available = {
		
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		
			war_length_with = {
				tag = FROM
				months > 5
			}

        }
		complete_effect = {
			FROM = { country_event = { id = BPD_Better_Peace_Deals_Country.3 hours = 6 } }
		}
    }

	BPD_restore_status_quo_td_attacker = {
	
		icon = eng_trade_unions_support
		
		allowed = {
		}
	
        visible = {
			NOT = { has_country_flag = show_peace_decisions }
        }
        target_trigger = {
            FROM = {
                has_war_with = ROOT
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
            }
        }
        cost = 25
		modifier = { }
		days_re_enable = 180
		
		ai_will_do = {
			factor = 0
		}

        available = {
		
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		
			war_length_with = {
				tag = FROM
				months > 5
			}

        }
		complete_effect = {
			FROM = { country_event = { id = BPD_Better_Peace_Deals_Country.1 hours = 6 } }
		}
    }
	
	BPD_secure_our_claims_td_loser = {
	
		icon = eng_trade_unions_support
		
		allowed = {
		}
	
        visible = {
			NOT = { has_country_flag = show_peace_decisions }
        }
        target_trigger = {
            FROM = {
                has_war_with = ROOT
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
            }
        }
        cost = 25
		modifier = { }
		days_re_enable = 180
		
		ai_will_do = {
			factor = 0
		}

        available = {
		
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		
			war_length_with = {
				tag = FROM
				months > 5
			}

        }
		complete_effect = {
			FROM = { country_event = { id = BPD_Better_Peace_Deals_Country.5 hours = 6 } }
		}
    }
	
	BPD_total_surrender_td_loser = {
	
		icon = eng_trade_unions_support
		
		allowed = {
		}
	
        visible = {
			NOT = { has_country_flag = show_peace_decisions }
        }
        target_trigger = {
            FROM = {
                has_war_with = ROOT
				OR = {
					is_in_faction = no
					is_faction_leader = yes
				}
            }
        }
        cost = 25
		modifier = { }
		days_re_enable = 180
		
		ai_will_do = {
			factor = 0
		}

        available = {
		
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		
			war_length_with = {
				tag = FROM
				months > 5
			}

        }
		complete_effect = {
			FROM = { country_event = { id = BPD_Better_Peace_Deals_Country.6 hours = 6 } }
		}
    }
	

	
}

BPD_War_Aims = {

show_hide_claim_decisions = {
        priority = 100
        visible = { always = yes }
		
		ai_will_do = {
			factor = 0
		}

        complete_effect = { 
            if = {
                limit = { has_country_flag = show_claim_decisions }
                clr_country_flag = show_claim_decisions
            }
            else = {
                set_country_flag = show_claim_decisions
            }
        }
    }
	
	ITA_Italian_Demands_ETH = {
		priority = 90
		icon = GFX_decision_eng_trade_unions_demand
		
		allowed = {
			tag = ITA
		}

		available = {
			has_war_with = ETH
			any_state = { OR = { is_core_of = ETH is_core_of = SOM } NOT = { is_core_of = ITA } NOT = { is_claimed_by = ITA } }
		}

		visible = {
		NOT = { has_country_flag = show_claim_decisions }
		}

		cost = 50
		days_remove = 30

		fire_only_once = yes

		ai_will_do = {
			factor = 1000
		}
		
		complete_effect = {
		}

		remove_effect = {
			if = { limit = { is_ai = no } hidden_effect = { sound_effect = complete_focus } }
			every_state = {
				limit = { OR = { is_core_of = ETH is_core_of = SOM } NOT = { is_core_of = ITA } NOT = { is_claimed_by = ITA } }
				add_claim_by = ITA
			}
		}
		
	}
	
	
	BFN_claim_states_targeted_decision_at_war = {
	icon = GFX_decision_eng_trade_unions_demand
    state_target = yes
    target_root_trigger = {
    }
    target_array = controlled_states
    target_trigger = {
        FROM = {
			NOT = { is_owned_by = ROOT }
			NOT = { is_core_of = ROOT }
			NOT = { is_claimed_by = ROOT }
			is_fully_controlled_by = ROOT
			any_neighbor_state = {
				OR = {
					is_core_of = ROOT
					is_claimed_by = ROOT
				}
			}
        }
    }
	available = {
	}
	visible = {
			has_war = yes
            NOT = { has_country_flag = show_claim_decisions }
			FROM = { 
				NOT = { is_core_of = ROOT }
				NOT = { is_claimed_by = ROOT }
				NOT = { has_state_flag = Claiming_In_Progress } 
			}
        }
	ai_will_do = {
		factor = 0
	}
	modifier = { }
	days_remove = 30
    on_map_mode = map_and_decisions_view
    cost = 50
    complete_effect = {
		hidden_effect = {
			FROM = { 
				set_state_flag = Claiming_In_Progress
			}
		}
	}
	remove_effect = {
			if = { limit = { is_ai = no } hidden_effect = { sound_effect = complete_focus } }
			FROM = {
				add_claim_by = ROOT
				clr_state_flag = Claiming_In_Progress
			}
	}
}

BFN_claim_states_targeted_decision_remote_at_war = {
	icon = GFX_decision_eng_trade_unions_demand
    state_target = yes
    target_root_trigger = {
    }
    target_array = controlled_states
    target_trigger = {
        FROM = {
			NOT = { is_owned_by = ROOT }
			NOT = { is_core_of = ROOT }
			is_fully_controlled_by = ROOT
			all_neighbor_state = {
				NOT = { is_core_of = ROOT }
				NOT = { is_claimed_by = ROOT }
			}
        }
    }
	available = {
	}
	visible = {
			has_war = yes
            NOT = { has_country_flag = show_claim_decisions }
			FROM = { 
				NOT = { is_core_of = ROOT }
				NOT = { is_claimed_by = ROOT }
				NOT = { has_state_flag = Claiming_In_Progress } 
			}
        }
	ai_will_do = {
		factor = 0
	}
	modifier = { }
	days_remove = 90
    on_map_mode = map_and_decisions_view
    cost = 150
    complete_effect = {
		hidden_effect = {
			FROM = { 
				set_state_flag = Claiming_In_Progress
			}
		}
	}
	remove_effect = {
			if = { limit = { is_ai = no } hidden_effect = { sound_effect = complete_focus } }
			FROM = {
				add_claim_by = ROOT
				clr_state_flag = Claiming_In_Progress
			}
	}
}

}